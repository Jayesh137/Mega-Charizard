# Mega Charizard Academy v4 — Design Document

**Date:** 2026-02-24
**Status:** Approved
**Target:** Owen (2.5yo) + Kian (4yo), uncle-mediated

---

## 1. Vision

Transform the session from "play mini-games, collect gems" into a **living evolution journey**. The kids aren't just answering questions — they're evolving their Charmander into Mega Charizard X. Every correct answer, every celebration, every clip reinforces the obsession. Ash Ketchum narrates the entire experience.

### Core Principles

- **Evolution IS the reward.** The whole session builds toward Mega Evolution.
- **Charizard everywhere.** Maximum variety of anime clips, sprites, and moments.
- **Ash is the voice.** AI-cloned Ash narrates every prompt, celebration, and redirect.
- **Beautiful and engaging.** Every screen is visually stunning, kid-friendly, Pokemon-themed.
- **Point and shout.** Uncle clicks, kids point and yell answers. No tracing, no precision.
- **No failure.** Gentle redirects, escalating hints, auto-complete with celebration.
- **Research-backed limits.** Timeout, session caps, and cooldowns built in.

---

## 2. Session Flow

```
SESSION START
│
├─ Intro clip (rotates between 3-4 Ash/Charmander clips)
├─ Ash: "Hey trainers! Let's help Charmander get stronger!"
├─ Charmander sprite appears in corner, bouncing excitedly
│
├─ GAME 1 (Owen-weighted: Flame Colors — his focus is colors)
│  ├─ Corner: Charmander reacts to every answer
│  ├─ Correct: random celebration clip (from pool of 8-10)
│  ├─ Evolution meter fills toward 33%
│  └─ Round complete
│
├─ ★ EVOLUTION #1 — Charmander → Charmeleon
│  ├─ Meter hits 33% → sprite glows white, game pauses
│  ├─ Anime evolution clip plays (5-8s)
│  ├─ Ash: "IT'S EVOLVING!! CHARMELEON!!"
│  ├─ White flash → Charmeleon sprite appears with particle burst
│  └─ Transition clip: Charmeleon showing off
│
├─ GAME 2 (Kian-weighted: Phonics Arena — his focus is phonics)
│  ├─ Corner: Charmeleon reacts
│  ├─ Cross-reinforcement: colors named for Owen's benefit
│  ├─ Evolution meter fills toward 66%
│  └─ Round complete
│
├─ ★★ EVOLUTION #2 — Charmeleon → Charizard
│  ├─ Meter hits 66% → Charmeleon glows
│  ├─ Anime evolution clip plays (5-8s)
│  ├─ Ash: "CHARIZARD!! I CHOOSE YOU!!"
│  ├─ Bigger celebration, more particles
│  └─ Transition clip: Charizard flying/roaring
│
├─ GAME 3 (Evolution Challenge — new game)
│  ├─ "Who evolves into who?" + "Put them in order!"
│  ├─ Corner: Charizard, wings spread
│  ├─ Evolution meter building toward 100%
│  └─ Round complete
│
├─ ★★★ MEGA EVOLUTION — Charizard → Mega Charizard X
│  ├─ Meter hits 100% → dramatic screen effects
│  ├─ Mega Stone appears, Charizard touches it
│  ├─ Full Mega Evolution sequence from XY&Z anime (8-12s)
│  ├─ Ash: "MEGA EVOLUTION!!! MEGA CHARIZARD X!!!"
│  ├─ Blue flames EVERYWHERE, biggest particle storm
│  └─ MCX pose with blazing blue flame aura
│
├─ GAME 4 (Any game — played as Mega Charizard X)
│  ├─ Everything visually powered up with blue flame theme
│  ├─ Corner: Full MCX with blazing blue aura
│  └─ Round complete
│
├─ FINALE
│  ├─ Blast Burn clip — MCX ultimate attack
│  ├─ Ash: "We did it! You're the greatest trainers ever!"
│  ├─ Victory screen with all 4 evolution stages shown
│  └─ "Play again?" → resets to Charmander
│
└─ SESSION COMPLETE → cooldown begins
```

---

## 3. Evolution Sprite System

The corner sprite is the heartbeat of the experience. It evolves live as kids progress.

### Four Stages

| Stage | Sprite | Corner Behaviour |
|-------|--------|-----------------|
| **Charmander** | Tiny, bouncy, tail flame | Hops on correct, looks sad on wrong, wags tail idle |
| **Charmeleon** | Medium, fierce, confident | Punches air on correct, snorts flame on wrong, paces idle |
| **Charizard** | Large, wings spread | Roars/flaps on correct, shakes head on wrong, breathes embers idle |
| **Mega Charizard X** | Full size, blue flames | Blue fire erupts on correct, gentle blue aura idle |

### Evolution Transition Sequence

1. Meter hits threshold → sprite starts glowing white, pulsing
2. Screen dims, all game elements pause
3. Anime evolution clip plays (3-12s depending on stage)
4. Ash screams the evolution line
5. White flash → new sprite appears with dramatic particle burst
6. New sprite does signature pose
7. 2-second cooldown, then game resumes

### Real-Time Reactions

- **Correct answer:** Sprite jumps/roars, small particle burst
- **Wrong answer:** Sprite gently shakes head, encouraging posture
- **Hint activated:** Sprite leans toward correct answer (visual nudge)
- **Idle too long:** Sprite looks at player, tilts head curiously

### Evolution Meter

- Replaces the current Flame Meter
- Shaped like a Mega Stone, fills with blue energy
- Thresholds: 33% (Charmeleon), 66% (Charizard), 100% (Mega Charizard X)
- Correct: +2 charge, Independent (no hints): +3, Auto-complete: +0.5

---

## 4. Mini-Games (4 + 1 New)

### Game 1: Flame Colors (Dragon Gem Hunt)

**Concept:** Color recognition. Owen's focus area.

**Visual overhaul:**
- Gems become faceted Mega Stones with inner glow and colored light projection
- Correct tap: gem SHATTERS into crystal shards that fly toward evolution sprite
- Background: volcanic cave, lava glow at bottom, blue crystal stalactites
- Choices on glowing platforms (rounded cards with gradient background)

**Owen (2.5yo):** 2 choices, primary colors (red/blue/yellow), 200px Mega Stones, 5 prompts
**Kian (4yo):** 3-4 choices, extended palette, 160px Mega Stones, 7 prompts

**Prompt:** Ash says "Find the RED Mega Stone!" — just text + answer options, no reference blob.

### Game 2: Fireball Count

**Concept:** Counting with instant visual feedback.

**Visual overhaul:**
- Fire pillars — stone columns that ignite one by one as you count
- Each click launches a fireball from the sprite toward the next pillar
- Big flame numbers appear on each count ("1... 2... 3!")
- Background: training arena / rocky battlefield aesthetic
- Exact count triggers sprite's signature attack move

**Owen (2.5yo):** Numbers 1-3 (subitizing), 5 prompts
**Kian (4yo):** Numbers 1-7 (cardinal counting), 7 prompts

### Game 3: Evolution Tower (Shape Forge)

**Concept:** Shape recognition + size comparison.

**Visual overhaul:**
- Shapes become armor pieces for the evolving sprite
- Choices sit on stone pedestals with blue flame torches
- Correct shape flies up and attaches to an armor blueprint silhouette
- Size mode: shapes on a glowing scale/balance
- Background: blacksmith forge with anvil, sparks, molten metal glow

**Owen (2.5yo):** Circle/square/triangle, 2 choices, 5 prompts
**Kian (4yo):** + diamond/star/hexagon, 3-4 choices, NOT challenges, 7 prompts

### Game 4: Phonics Arena (Replaces Sky Writer)

**Concept:** Letter recognition + phonics. Kian's focus area. Replaces the tracing mechanic.

**How it works:**
- A glowing constellation draws itself star-by-star (animated, 3 seconds)
- Blue fire trails connect stars — the letter "burns" into the night sky
- Kids WATCH the constellation form (no tracing required)
- Then answer a question about it

**Owen (2.5yo) — Letter Recognition:**
- "What letter is this?" — constellation shows big C, two choice tablets appear (C vs F)
- He points, uncle clicks. Ash: "C! C for Charizard!"
- 4 prompts per round, no phonics

**Kian (4yo) — Phonics:**
- Alternating: letter recognition ("What letter?") and phonics ("What sound?")
- "What sound does B make?" — two stone tablets: "Buh" vs "Duh"
- Ash: "Buh! B says BUH! Like BLUE!"
- 6 prompts per round

**Visuals:**
- Choice buttons are large stone tablets with glowing rune text
- Correct answer: constellation BLAZES bright blue, massive celebration
- Background: mountain peak at night, stars everywhere, sprite silhouetted against moon

### Game 5: Evolution Challenge (NEW)

**Concept:** Evolution chain knowledge — who evolves into who?

**Two modes:**
- **"Who evolves into who?"** — Show a sprite (Charmander), ask "Who does Charmander become?" — 2-3 sprite choices. Owen gets 2 choices, Kian gets 3.
- **"Put them in order!"** — Scrambled evolution sprites, tap in evolution order. Owen: 2 stages, Kian: all 4.

**Every correct answer plays a quick evolution flash. All correct triggers full evolution clip.**

**This game is played as Game 3 in the session flow, building toward Mega Evolution.**

---

## 5. Focus Area Weighting

Owen is learning colors. Kian is learning phonics. Their focus concept appears everywhere.

### Layer 1: Game Order Weighting

- Owen's turns: Flame Colors appears more often (2 out of 4 game slots)
- Kian's turns: Phonics Arena appears more often
- Other games still appear, just weighted lower

### Layer 2: Cross-Game Reinforcement

- When Owen plays shapes, Ash names colors: "Find the BLUE circle!"
- When Kian plays counting, Ash spells: "F-I-V-E! Five fireballs!"
- Evolution sprites glow in colors Ash names (for Owen)
- Evolution stage names appear briefly spelled out (for Kian)

### Layer 3: Celebration Callbacks

- Owen's correct answers: Ash echoes the COLOR — "RED! Red flame! Amazing!"
- Kian's correct answers: Ash echoes the SOUND — "Cuh! C says CUH!"
- Happens even in non-focus games for extra exposure

---

## 6. Ash Ketchum Voice System

### Implementation

- **Engine:** ElevenLabs AI voice clone
- **Training data:** Clean Ash audio from Pokemon XY/XYZ era (best voice)
- **Output:** MP3 files stored in `public/audio/voice/ash/`
- **Fallback:** Web Speech API if clip is missing
- **Delivery:** High energy for celebrations, calm for encouragement, EXPLOSIVE for evolution

### Voice Line Categories (~80-100 custom lines)

| Category | Examples | Count |
|----------|---------|-------|
| Turn calls | "Owen, it's your turn! Let's GO!" | 6-8 |
| Color prompts | "Find the RED one!", "Where's YELLOW?" | 12-15 |
| Number prompts | "Count to THREE!", "Charge up FIVE!" | 10-12 |
| Shape prompts | "Find the CIRCLE!", "Where's the STAR?" | 10-12 |
| Letter/phonics prompts | "What letter is this?", "What sound does B make?" | 8-10 |
| Correct reactions | "YEAH!", "AWESOME!", "You did it!" | 8-10 |
| Wrong redirects | "Not quite!", "Almost! Look for the blue one!" | 6-8 |
| Evolution hype | "IT'S EVOLVING!", "MEGA EVOLUTION!!" | 6-8 |
| Encouragement | "Don't give up!", "I believe in you!" | 5-6 |
| Iconic lines | "I choose you!", "Let's win this together!" | 5-6 |

### Three-Label Rule (unchanged)

Every concept said 3 times: prompt → action → success echo.
Ash handles all three naturally.

---

## 7. Video Clip Library

### Sourcing (Priority Order)

1. **Pokemon XY&Z / Mega Evolution Specials** — Best animation, Mega Charizard X features heavily
2. **Pokemon Journeys / Ultimate Journeys** — Modern animation, Ash's Charizard returns
3. **Original Series (Indigo/Johto)** — Classic evolution and bonding moments
4. **Pokemon Origins** — Red's Charizard Mega Evolving, stunning animation

### Clip Inventory (~25-30 clips)

**Evolution clips (3 — play once each per session):**

| Clip | Source | Duration |
|------|--------|----------|
| Charmander → Charmeleon | Original Series / Journeys flashback | 5-8s |
| Charmeleon → Charizard | Original Series EP046 | 5-8s |
| Charizard → Mega Charizard X | Mega Evolution Special / XY&Z | 8-12s |

**Celebration clips (8-10 — random on correct answers):**

| Clip | Description | Duration |
|------|------------|----------|
| Charizard Flamethrower | Classic fire blast, dramatic angle | 2-3s |
| MCX Blast Burn | Blue flame explosion | 2-3s |
| Ash fist pump | Celebrating with Charizard | 2-3s |
| Charizard victory roar | Flames blazing, triumphant | 2s |
| MCX Dragon Claw | Blue claws slash, energy burst | 2-3s |
| Charizard Seismic Toss | Grabs, flies up, slams down | 3-4s |
| Blue flame aura ignite | MCX powers up | 2-3s |
| Ash & Charizard high five | Bonding moment | 2-3s |

**Calm/transition clips (5 — between games):**

| Clip | Description | Duration |
|------|------------|----------|
| Charizard flying at sunset | Peaceful soaring | 5-8s |
| Ash riding Charizard | Flying through clouds | 5-8s |
| Charmander by campfire | Cozy, tail flame glowing | 5-8s |
| Charizard sleeping | Gentle breathing | 5-6s |
| Ash & Charizard stargazing | Quiet bonding | 5-8s |

**Encouragement clips (3-4 — on wrong answers):**

| Clip | Description | Duration |
|------|------------|----------|
| Ash determined face | "Don't give up!" energy | 2s |
| Charizard shaking it off | Gets hit, ready to go | 2-3s |
| Ash encouraging | Warm smile, supportive | 2s |

**Intro clips (3-4 — session start, rotates):**

| Clip | Description | Duration |
|------|------------|----------|
| Ash throwing Pokeball | "I choose you!" | 3-4s |
| Charmander first appearance | Cute, tail flame | 3-4s |
| Ash & team ready pose | Adventure beginning | 3-4s |

### Smart Rotation

- Tracks which clips played this session
- Never shows same clip twice in a row
- Weights unseen clips higher
- Every session feels different

### Quality Requirements

- Minimum 720p, prefer 1080p
- Clean cuts — no mid-sentence audio, no subtitle burn-in
- Audio stripped (Ash voice system handles audio separately)
- Format: MP4 h264, <2MB per clip for fast loading

---

## 8. Visual Aesthetics Overhaul

### Colour Palette

- **Backgrounds:** Rich animated gradients. Deep purple-blue at bottom, warmer indigo at horizon. Subtle aurora-like colour waves that slowly shift.
- **UI elements:** "Mega Energy" treatment — glowing cyan edges, blue flame wisps around interactive elements, soft pulsing.
- **Correct answer:** Gold + blue particle explosion, screen briefly flashes warm.
- **Wrong answer:** Gentle, quick — soft red pulse that fades immediately. Never scary.

### Typography

- **Font:** Fredoka (chunky, rounded, kid-friendly). Replace all `system-ui` usage.
- **Prompts:** 80-96px bold white with coloured shadow matching game theme.
- **Labels:** 28-36px bold, always high contrast.
- **Clear visual hierarchy** — no overlapping text, proper spacing.

### Interactive Elements

- Minimum **180px** touch targets for Owen.
- Bouncy idle animation (gentle scale pulse + bob).
- Each choice on a glowing platform — rounded card, soft gradient background.
- Correct choice: scales up, gold ring, particle burst.

### Per-Game Backgrounds

- **Flame Colors:** Volcanic cave, lava glow, blue crystal stalactites.
- **Fireball Count:** Training arena, rocky battlefield.
- **Evolution Tower:** Blacksmith forge, anvil, sparks, molten metal glow.
- **Phonics Arena:** Mountain peak at night, stars, sprite silhouetted against moon.
- **Evolution Challenge:** Stadium/arena with cheering crowd energy particles.

---

## 9. Parental Controls

### Timeout (Discipline)

- **Trigger:** Uncle presses `T`
- **Duration:** 3 minutes (research-backed: ~1 min per year of age, averaged for both kids)
- **Effect:** Entire game locks for both players. No clicks do anything.
- **Visual:** Screen dims. Charizard closes eyes, flame dims, lies down to sleep. Big countdown timer visible. "Charizard needs a rest."
- **Unlock:** Timer expires OR uncle presses `T` again for early unlock.
- **Resume animation:** Charizard wakes up, stretches, flame brightens. Ash: "Welcome back, trainers! Let's be good this time!"
- **Game state preserved** — resumes exactly where it left off.

### Session Limits

| Rule | Value |
|------|-------|
| Session length | ~20 min (4 games, 1 evolution journey) |
| Cooldown between sessions | 2 hours |
| Daily session limit | 4 sessions max |
| Daily playtime total | ~80 minutes |
| Daily reset | 6:00 AM |

### Session Flow

- After each session: "Great training! Charizard needs to rest. Come back at [time]!"
- Sleeping Charizard animation with clock showing next available time.
- After 4th session: "Charizard gave it everything today! See you tomorrow, trainers!"
- Charizard sleeps with a moon and stars background.

### Uncle Override

- **Hold `U` + `O` for 3 seconds** to bypass any lock (timeout, cooldown, daily limit).
- No visual indicator of the override — kids don't know it exists.

### Persistence

- All timers/limits stored in localStorage.
- Refreshing browser does not reset counters.
- Survives page reloads and browser restarts.

---

## 10. Transition Animations (Between Games)

Replace plain calm resets with richer transitions:

- **Evolution walk:** Current-stage sprite walks/flies across screen. Ash narrates: "Charmeleon is getting stronger!"
- **Evolution tease:** Sprite glows and shimmers, almost evolving. "Just a little more training!" Builds anticipation.
- **Clip moment:** Random 5-8s anime clip (flying scenes, bonding moments). A "treat" between games.
- **Calm reset still available:** Space key extends duration. Now visually richer — current evolution stage breathes/rests with gentle particle effects.

---

## 11. Technical Implementation Notes

### New Files Required

- `src/engine/systems/evolution-manager.ts` — Manages evolution state, meter, stage transitions
- `src/engine/systems/clip-manager.ts` — Smart rotation, category selection, playback
- `src/engine/systems/session-limiter.ts` — Timeout, cooldowns, daily limits, localStorage persistence
- `src/engine/systems/focus-weight.ts` — Game selection weighting per child's focus area
- `src/engine/games/phonics-arena.ts` — Replaces sky-writer.ts
- `src/engine/games/evolution-challenge.ts` — New evolution chain game
- `src/components/TimeoutOverlay.svelte` — Sleeping Charizard + countdown
- `src/components/SessionLimitOverlay.svelte` — "Come back at [time]" screen
- `src/config/clips.ts` — Clip metadata, categories, file paths
- `src/config/ash-lines.ts` — All Ash voice line mappings

### Modified Files

- `src/engine/entities/flame-meter.ts` → Refactor into evolution meter
- `src/engine/games/flame-colors.ts` → Visual overhaul (Mega Stones, cave background)
- `src/engine/games/fireball-count.ts` → Visual overhaul (fire pillars, arena)
- `src/engine/games/evolution-tower.ts` → Visual overhaul (armor forge, pedestals)
- `src/engine/screens/hub.ts` → Evolution stage display, session limit checks
- `src/engine/screens/calm-reset.ts` → Richer transitions with clips
- `src/engine/screens/opening.ts` → New intro clip rotation
- `src/engine/screens/finale.ts` → Enhanced with MCX clips
- `src/components/GameCanvas.svelte` → Register new games + timeout key
- `src/engine/input.ts` → New hotkeys (T for timeout, U+O for override)
- `src/state/session.svelte.ts` → Evolution stage state, session counters
- `src/state/settings.svelte.ts` → Daily limits persistence
- `src/config/theme.ts` → Per-game background palettes

### Asset Requirements

- ~25-30 video clips (MP4, h264, <2MB each, 720p+)
- ~80-100 Ash voice lines (MP3, generated via ElevenLabs)
- Fredoka font (Google Fonts or self-hosted)
- Background artwork or procedural generation for 5 game themes

### Deleted Files

- `src/engine/games/sky-writer.ts` — Replaced by phonics-arena.ts

---

## 12. Hotkey Reference (Updated)

| Key | Action |
|-----|--------|
| `T` | Toggle timeout (3-min lock) |
| `U`+`O` (hold 3s) | Uncle override — bypass any lock |
| `H` | Toggle hint overlay |
| `D` | Toggle debug panel |
| `M` | Demo mode |
| `1`/`2`/`3` | Celebration intensity: Calm/Normal/Hype |
| `0` | Silent mode |
| `L`/`B`/`T` | Force Owen/Kian/Team turn |
| `Space` (hold) | Extend calm reset +3s |
| `R` | Replay current game |
| `Esc` | Return to hub |
| `F` | Toggle fullscreen |
